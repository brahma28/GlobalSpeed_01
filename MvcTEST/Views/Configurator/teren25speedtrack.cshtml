@using MvcTEST.HtmlHelpers
@*@model MvcTEST.Models.tblTemplate*@

@{
    ViewBag.Title = "terenspeedtrack";
    Layout = null;
    
}
<style>

.polje_red
{ 
    color:red; 
    width:50px; 
    height:50px; 
    background-color:red;

} 
.polje_white
{ 
    color:red; 
    width:50px; 
    height:50px; 
    background-color:white;

} 

.polje_lgray
{ 
    color:red; 
    width:30px; 
    height:30px; 
    background-color:lightslategray;

} 
.teren
{ 
    width: 100%; 
    text-align: left; 
    height:470px; 
    vertical-align:top; 
    border-spacing:0px; 
    border:0px; 
    PADDING:0; 
    border-collapse:collapse;

} 
</style>

    <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    <script type="text/javascript" src="/Scripts/fancybox/jquery.fancybox-1.3.4.js"></script>
    <script type="text/javascript" src="/Scripts//fancybox/jquery.Easing-1.3.pack.js"></script>
    <link id="size-stylesheet" href="@Url.Content("/Content/style.css")" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="@Url.Content("~/Scripts/fancybox/jquery.fancybox-1.3.4.css")" type="text/css" media="screen" />


<div style=" color:black; background-color:white; position:relative;">
    @if (ViewBag.teren.F01Active == true && ViewBag.teren.F01PhotoCell == true)
    { 
    <div id="F01" style=" position:absolute; width:100px; height:@(ViewBag.teren.F01DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F01PositionX.ToString())px; top:@(ViewBag.teren.F01PositionY.ToString())px; " > 
        @if (ViewBag.teren.F01ID == 0 && ViewBag.teren.F01PhotoCell == true)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }   
      
    @if (ViewBag.teren.F02Active == true && ViewBag.teren.F02PhotoCell == true)
    { 
    <div id="F02" style=" position:absolute; width:100px; height:@(ViewBag.teren.F02DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F02PositionX.ToString())px; top:@(ViewBag.teren.F02PositionY.ToString())px; " > 
        @if (ViewBag.teren.F01ID != 0  && ViewBag.teren.F02ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }    
     
    @if (ViewBag.teren.F03Active == true && ViewBag.teren.F03PhotoCell == true)
    {     
    <div id="F03" style=" position:absolute; width:100px; height:@(ViewBag.teren.F03DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F03PositionX.ToString())px; top:@(ViewBag.teren.F03PositionY.ToString())px; " > 
        @if (ViewBag.teren.F02ID != 0  && ViewBag.teren.F03ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }   
      
    @if (ViewBag.teren.F04Active == true && ViewBag.teren.F04PhotoCell == true)
    {      
    <div id="F04" style=" position:absolute; width:100px; height:@(ViewBag.teren.F04DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F04PositionX.ToString())px; top:@(ViewBag.teren.F04PositionY.ToString())px; " >  
        @if (ViewBag.teren.F03ID != 0  && ViewBag.teren.F04ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }
         
    @if (ViewBag.teren.F05Active == true && ViewBag.teren.F05PhotoCell == true)
    {     
    <div id="F05" style=" position:absolute; width:100px; height:@(ViewBag.teren.F05DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F05PositionX.ToString())px; top:@(ViewBag.teren.F05PositionY.ToString())px; " >
        @if (ViewBag.teren.F04ID != 0 && ViewBag.teren.F05ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
       
    @if (ViewBag.teren.F06Active == true && ViewBag.teren.F06PhotoCell == true)
    {        
    <div id="F06" style=" position:absolute; width:100px; height:@(ViewBag.teren.F06DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F06PositionX.ToString())px; top:@(ViewBag.teren.F06PositionY.ToString())px; " > 
        @if (ViewBag.teren.F05ID != 0 && ViewBag.teren.F06ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }
         
    @if (ViewBag.teren.F07Active == true && ViewBag.teren.F07PhotoCell == true)
    {    
    <div id="F07" style=" position:absolute; width:100px; height:@(ViewBag.teren.F07DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F07PositionX.ToString())px; top:@(ViewBag.teren.F07PositionY.ToString())px; " > 
        @if (ViewBag.teren.F06ID != 0 && ViewBag.teren.F07ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
       
    @if (ViewBag.teren.F08Active == true && ViewBag.teren.F08PhotoCell == true)
    {     
    <div id="F08" style=" position:absolute; width:100px; height:@(ViewBag.teren.F08DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F08PositionX.ToString())px; top:@(ViewBag.teren.F08PositionY.ToString())px; " > 
        @if (ViewBag.teren.F07ID != 0 && ViewBag.teren.F08ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
        
    @if (ViewBag.teren.F09Active == true && ViewBag.teren.F09PhotoCell == true)
    {      
    <div id="F09" style=" position:absolute; width:100px; height:@(ViewBag.teren.F09DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F09PositionX.ToString())px; top:@(ViewBag.teren.F09PositionY.ToString())px; " > 
        @if (ViewBag.teren.F08ID != 0 && ViewBag.teren.F09ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
       
    @if (ViewBag.teren.F10Active == true && ViewBag.teren.F10PhotoCell == true)
    {      
    <div id="F10" style=" position:absolute; width:100px; height:@(ViewBag.teren.F10DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F10PositionX.ToString())px; top:@(ViewBag.teren.F10PositionY.ToString())px; " > 
        @if (ViewBag.teren.F09ID != 0 && ViewBag.teren.F10ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
        
    <!-- 11 -->
    @if (ViewBag.teren.F11Active == true && ViewBag.teren.F11PhotoCell == true)
    {      
    <div id="F11" style=" position:absolute; width:100px; height:@(ViewBag.teren.F11DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F11PositionX.ToString())px; top:@(ViewBag.teren.F11PositionY.ToString())px; " >
        @if (ViewBag.teren.F10ID != 0 && ViewBag.teren.F11ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
        
    <!-- 12 -->
    @if (ViewBag.teren.F12Active == true && ViewBag.teren.F12PhotoCell == true)
    {     
    <div id="F12" style=" position:absolute; width:100px; height:@(ViewBag.teren.F12DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F12PositionX.ToString())px; top:@(ViewBag.teren.F12PositionY.ToString())px; " > 
        @if (ViewBag.teren.F11ID != 0 && ViewBag.teren.F12ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
     
    <!-- 13 -->
    @if (ViewBag.teren.F13Active == true && ViewBag.teren.F13PhotoCell == true)
    {     
    <div id="F13" style=" position:absolute; width:100px; height:@(ViewBag.teren.F13DimensionX.ToString())px;  color:red; background-color:red;   left:@(ViewBag.teren.F13PositionX.ToString())px; top:@(ViewBag.teren.F13PositionY.ToString())px; " > 
        @if (ViewBag.teren.F12ID != 0 && ViewBag.teren.F13ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
     
    <!-- 14 -->
    @if (ViewBag.teren.F14Active == true && ViewBag.teren.F14PhotoCell == true)
    {     
    <div id="F14" style=" position:absolute; width:100px; height:@(ViewBag.teren.F14DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F14PositionX.ToString())px; top:@(ViewBag.teren.F14PositionY.ToString())px; " >
        @if (ViewBag.teren.F13ID != 0 && ViewBag.teren.F14ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
     
    <!-- 15 -->
    @if (ViewBag.teren.F15Active == true && ViewBag.teren.F15PhotoCell == true)
    {     
    <div id="F15" style=" position:absolute; width:100px; height:@(ViewBag.teren.F15DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F15PositionX.ToString())px; top:@(ViewBag.teren.F15PositionY.ToString())px; " > 
        @if (ViewBag.teren.F14ID != 0 && ViewBag.teren.F15ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 

    <!-- 16 -->
    @if (ViewBag.teren.F16Active == true && ViewBag.teren.F16PhotoCell == true)
    {     
    <div id="F16" style=" position:absolute; width:100px; height:@(ViewBag.teren.F16DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F16PositionX.ToString())px; top:@(ViewBag.teren.F16PositionY.ToString())px; " > 
        @if (ViewBag.teren.F15ID != 0 && ViewBag.teren.F16ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 

    <!-- 17 -->
    @if (ViewBag.teren.F17Active == true && ViewBag.teren.F17PhotoCell == true)
    {     
    <div id="F17" style=" position:absolute; width:100px; height:@(ViewBag.teren.F17DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F17PositionX.ToString())px; top:@(ViewBag.teren.F17PositionY.ToString())px; " >
        @if (ViewBag.teren.F16ID != 0 && ViewBag.teren.F17ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
    <!-- 18 -->
    @if (ViewBag.teren.F18Active == true && ViewBag.teren.F18PhotoCell == true)
    {     
    <div id="F18" style=" position:absolute; width:100px; height:@(ViewBag.teren.F18DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F18PositionX.ToString())px; top:@(ViewBag.teren.F18PositionY.ToString())px; " > 
        @if (ViewBag.teren.F17ID != 0 && ViewBag.teren.F18ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
    <!-- 19 -->        
    @if (ViewBag.teren.F19Active == true && ViewBag.teren.F19PhotoCell == true)
    {      
    <div id="F19" style=" position:absolute; width:100px; height:@(ViewBag.teren.F19DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F19PositionX.ToString())px; top:@(ViewBag.teren.F19PositionY.ToString())px; " > 
        @if (ViewBag.teren.F18ID != 0 && ViewBag.teren.F19ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
    <!-- 20 -->        
    @if (ViewBag.teren.F20Active == true && ViewBag.teren.F20PhotoCell == true)
    {      
    <div id="F20" style=" position:absolute; width:100px; height:@(ViewBag.teren.F20DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F20PositionX.ToString())px; top:@(ViewBag.teren.F20PositionY.ToString())px; " > 
        @if (ViewBag.teren.F19ID != 0 && ViewBag.teren.F20ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
        
    <!-- 21 -->
    @if (ViewBag.teren.F21Active == true && ViewBag.teren.F21PhotoCell == true)
    {      
    <div id="F21" style=" position:absolute; width:100px; height:@(ViewBag.teren.F21DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F21PositionX.ToString())px; top:@(ViewBag.teren.F21PositionY.ToString())px; " >
        @if (ViewBag.teren.F20ID != 0 && ViewBag.teren.F21ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
        
    <!-- 22 -->
    @if (ViewBag.teren.F22Active == true && ViewBag.teren.F22PhotoCell == true)
    {     
    <div id="F22" style=" position:absolute; width:100px; height:@(ViewBag.teren.F22DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F22PositionX.ToString())px; top:@(ViewBag.teren.F22PositionY.ToString())px; " > 
        @if (ViewBag.teren.F21ID != 0 && ViewBag.teren.F22ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
     
    <!-- 23 -->
    @if (ViewBag.teren.F23Active == true && ViewBag.teren.F23PhotoCell == true)
    {     
    <div id="F23" style=" position:absolute; width:100px; height:@(ViewBag.teren.F23DimensionX.ToString())px;  color:red; background-color:red;   left:@(ViewBag.teren.F23PositionX.ToString())px; top:@(ViewBag.teren.F23PositionY.ToString())px; " > 
        @if (ViewBag.teren.F22ID != 0 && ViewBag.teren.F23ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
     
    <!-- 24 -->
    @if (ViewBag.teren.F24Active == true && ViewBag.teren.F24PhotoCell == true)
    {     
    <div id="F24" style=" position:absolute; width:100px; height:@(ViewBag.teren.F24DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F24PositionX.ToString())px; top:@(ViewBag.teren.F24PositionY.ToString())px; " >
        @if (ViewBag.teren.F23ID != 0 && ViewBag.teren.F24ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
     
    <!-- 25 -->
    @if (ViewBag.teren.F25Active == true && ViewBag.teren.F25PhotoCell == true)
    {     
    <div id="F25" style=" position:absolute; width:100px; height:@(ViewBag.teren.F25DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F25PositionX.ToString())px; top:@(ViewBag.teren.F25PositionY.ToString())px; " > 
        @if (ViewBag.teren.F24ID != 0 && ViewBag.teren.F25ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 

    <!-- 26 -->
    @if (ViewBag.teren.F16Active == true && ViewBag.teren.F16PhotoCell == true)
    {     
    <div id="F16" style=" position:absolute; width:100px; height:@(ViewBag.teren.F16DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F26PositionX.ToString())px; top:@(ViewBag.teren.F26PositionY.ToString())px; " > 
        @if (ViewBag.teren.F15ID != 0 && ViewBag.teren.F16ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 

    <!-- 27 -->
    @if (ViewBag.teren.F27Active == true && ViewBag.teren.F27PhotoCell == true)
    {     
    <div id="F27" style=" position:absolute; width:100px; height:@(ViewBag.teren.F27DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F27PositionX.ToString())px; top:@(ViewBag.teren.F27PositionY.ToString())px; " >
        @if (ViewBag.teren.F26ID != 0 && ViewBag.teren.F27ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
    <!-- 28 -->
    @if (ViewBag.teren.F28Active == true && ViewBag.teren.F28PhotoCell == true)
    {     
    <div id="F28" style=" position:absolute; width:100px; height:@(ViewBag.teren.F28DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F28PositionX.ToString())px; top:@(ViewBag.teren.F28PositionY.ToString())px; " > 
        @if (ViewBag.teren.F27ID != 0 && ViewBag.teren.F28ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
    <!-- 29 -->        
    @if (ViewBag.teren.F29Active == true && ViewBag.teren.F29PhotoCell == true)
    {      
    <div id="F29" style=" position:absolute; width:100px; height:@(ViewBag.teren.F29DimensionX.ToString())px;  color:red;  background-color:red;   left:@(ViewBag.teren.F29PositionX.ToString())px; top:@(ViewBag.teren.F29PositionY.ToString())px; " > 
        @if (ViewBag.teren.F28ID != 0 && ViewBag.teren.F29ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    }  
    <!-- 30 -->          
    @if (ViewBag.teren.F30Active == true && ViewBag.teren.F30PhotoCell == true)
    {      
    <div id="F30" style=" position:absolute; width:100px; height:@(ViewBag.teren.F30DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F30PositionX.ToString())px; top:@(ViewBag.teren.F30PositionY.ToString())px; " > 
        @if (ViewBag.teren.F29ID != 0 && ViewBag.teren.F30ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
    <!-- 31 -->          
    @if (ViewBag.teren.F31Active == true && ViewBag.teren.F31PhotoCell == true)
    {      
    <div id="F31" style=" position:absolute; width:100px; height:@(ViewBag.teren.F31DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F31PositionX.ToString())px; top:@(ViewBag.teren.F31PositionY.ToString())px; " > 
        @if (ViewBag.teren.F30ID != 0 && ViewBag.teren.F31ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 
    <!-- 32 -->          
    @if (ViewBag.teren.F32Active == true && ViewBag.teren.F32PhotoCell == true)
    {      
    <div id="F32" style=" position:absolute; width:100px; height:@(ViewBag.teren.F32DimensionX.ToString())px;  color:red; background-color:red;  left:@(ViewBag.teren.F32PositionX.ToString())px; top:@(ViewBag.teren.F32PositionY.ToString())px; " > 
        @if (ViewBag.teren.F32ID != 0 && ViewBag.teren.F32ID == 0)
        { 
        <img src="~/ImagesApp/photochellikonaPLAVA.png" />
        } else { 
        <img src="~/ImagesApp/photochellikonaCRVENA.png" />
        }
    </div>
    } 

</div>


<script type="text/javascript">

    

    var wsUri = "ws://localhost:8080/test";
    

    var action = {
        pressed: function (field) {   
            $.post('@Url.Action("AjaxSetPhotochellID", "Configurator")', { field: field },
                 function (data) {
                     window.location.href = window.location.href;
                 });
        }
    };

    function init()
    {       
       
        websocket = new WebSocket(wsUri);
        websocket.onopen = function (evt) { onOpen(evt) };
        websocket.onclose = function (evt) { onClose(evt) };
        websocket.onmessage = function (evt) { onMessage(evt) };
        websocket.onerror = function (evt) { onError(evt) };
                
    }
   

    function onOpen(evt) {
        websocket.send("CALIBRATE!!0");
    }

    function onClose(evt)
    {
    
    }

    function onMessage(evt)
    {        
        var data = evt.data.split("!!");
        action[data[0]](data[1]);
    }

    function onError(evt)
    {
        //alert("ERROR:" + evt.data);
        alert("Cannot connect to server...");
    }

    function doSend(message)
    {
        //writeToScreen("SENT: " + message); 
        websocket.send(message);
    }
    

    window.addEventListener("load", init, false);
       
    
  
    </script>