@model MvcTEST.Models.tblGame
@using MvcTEST.HtmlHelpers
@{
    ViewBag.Title = "InOut";
}

<style>
    #newXXXVal {
        z-index: 10000;
        position: relative;
        padding: 25px;
        width: 580px;
        height: 100px;
        text-align: left;
        overflow: hidden;
        margin: 0px;
        font: bold 11px Verdana, Sans-serif;
        color: #fff;
        font-size: 16px;
        color: black;
    }

    .medvedButton {
        border: 4px solid;
        border-radius: 10px;
        text-shadow: #575757 1px 1px 0;
        font-style: normal;
        font-weight: bold;
        font-size: 24px;
        color: #ffffff;
        text-align: center;
        vertical-align: central;
        padding: 1px;
        line-height: 50px;
        display: -moz-inline-stack;
        display: inline-block;
        width: 280px;
        height: 68px;
        background-color: #d4d4d4;
        background-image: -moz-linear-gradient(top, #d4d4d4, #525252 75px);
        background-image: -webkit-linear-gradient(top, #d4d4d4, #525252 75px);
        background-image: -o-linear-gradient(top, #d4d4d4, #525252 75px);
        background-image: -ms-linear-gradient(top, #d4d4d4, #525252 75px);
        background-image: linear-gradient(top, #d4d4d4, #525252 75px);
    }
</style>

<div id="l1" style="padding: 10px; width: inherit; height: inherit; position: relative; z-index: 1; -moz-box-shadow: 3px 3px 5px 6px #000; -webkit-box-shadow: 3px 3px 5px 6px #000; box-shadow: 0px 0px 20px 0px gray; border: 0px solid; border-radius: 10px; -moz-border-radius: 10px; background-color: #EFECE7;">
    <div align="left" style="border: 0px solid;">
        <div align="right">
            <a href="@Url.Action("Games", "Configurator")">
                <img src="~/ImagesApp/close.png" border="0" />
            </a>
        </div>
        <title>@ViewBag.Title</title>

        <link id="size-stylesheet" href="@Url.Content("/Content/style.css")" rel="stylesheet" type="text/css" />
        <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
        <script type="text/javascript" src="/Scripts/fancybox/jquery.fancybox-1.3.4.js"></script>
        <script type="text/javascript" src="/Scripts//fancybox/jquery.Easing-1.3.pack.js"></script>
        <link rel="stylesheet" href="@Url.Content("~/Scripts/fancybox/jquery.fancybox-1.3.4.css")" type="text/css" media="screen" />

        @using (Html.BeginForm())
        {
   <div style="vertical-align:central; background-color:white; height: 730px; -moz-box-shadow: 3px 3px 5px 6px #000; -webkit-box-shadow: 3px 3px 5px 6px #000; box-shadow: 0px 0px 20px 0px gray; border: 0px solid; border-radius: 10px; -moz-border-radius: 10px; ">
    <div style="padding-left:15px; padding-top:10px; ">               
            <div>
                <table style="width:800px; text-align:left; ">
                    <tr>
                        <td>
                            <table style="width:400px; text-align:left">
                                <tr>
                                    <td>
                                        <img src="~/ImagesApp/inout1.png" height="70"/>
                                    </td>
                                    <td>
                                        <div id="errorsi" style="float: left; margin-right: 40px; color: red;"></div>
                                        <font size="5" style="color: #0360a3; font-family: 'Open Sans', sans-serif;">
                                            <b> @ViewBag.game.CategoryName.ToUpper() </b></font>
                                    </td>
                                </tr>
                            </table>
                        </td>
                        <td>
                            <table style="width: 400px; text-align: right">
                                <tr>
                                    <td colspan="2">

                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;">
                                        <div class="editor-label" style="text-align: right; width: 160px;">
                                            @Html.LabelFor(model => model.Name, @Html.Translate("Naziv igre"), new { style = "text-align:right;" })
                                        </div>
                                    </td>
                                    <td>
                                        <div class="editor-field" style="width: 300px;">

                                            @Html.TextBoxFor(model => model.Name, new { style = "width: 280px;" })
                                            @Html.ValidationMessageFor(model => model.Name)
                                        </div>
                                    </td>

                                </tr>
                            </table>
                    </tr>
                </table>
            </div>
            <hr />

            <table style="text-align: left; width: 750px">
                <tr>
                    <td>
                        <font size="2" style="color: #0360a3; font-family: 'Open Sans', sans-serif; padding-right: 10px;">
                        <b>Einstellungen:</b>
                        </font>
                    </td>
                </tr><tr><td colspan="3"><hr /></td>
                <tr>
                    <!-- TIME LIMIT -->
                    <td style="width: 100px;">
                        <div class="editor-label">
                            @Html.LabelFor(model => model.TimeLimit, @Html.Translate("Spieldauer"))
                        </div>
                    </td>

                    <td>
                        <div class="editor-field" style="width: 100px;">
                            <!--  -->
                            @Html.TextBoxFor(model => model.TimeLimit, new { style = "width: 60px;", type="number" })

                            @Html.ValidationMessageFor(model => model.TimeLimit)
                        </div>
                    </td>
                    <td>
                        @Html.HiddenFor(model => model.TimeLimitSecMin)
                        @if (Model.TimeLimitSecMin == true)
                        {
                            <div id="divsec" style="display: none;">(Sec.                         )</div>
                            <div id="divmin">(min.)</div>
                        }
                        else
                        {
                            <div id="divsec">(Sec.                         )</div>
                            <div id="divmin" style="display:none;">(min.)</div>
                        }
                    </td>
                    <td><div></div></td>
                    <td><div></div></td>
                    <td><div></div></td>
                </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.Description, @Html.Translate("Opis"))
                        </div>
                    </td>
                    <td colspan="5">
                        <!--  -->
                        <div class="editor-field" style="width: 250px; height:80px; aria-multiline="True" >
                            @* <input style = "width: 700px;" type="text" id="Description" value = @Model.Description >*@
                            @Html.EditorFor(model => model.Description, new { style = "width: 140px;" })
                            @Html.ValidationMessageFor(model => model.Description)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="label" style="width: 140px;">
                       <b> @Html.LabelFor(model => model.DescriptionDuration, @Html.Translate("Description duration"))  </b>              
                    </td>
                    <td>
                        <div class="editor-field-small">
                            @Html.TextBoxFor(model => model.DescriptionDuration, new { style = "width: 65px;", type="number" } )
                        </div>
                    </td>
                </tr>

                <!-- RANDOM FIELDS -->
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.Translate("Automatski generirajuća polja")
                        </div>
                    </td>
                    <td colspan="3">
                        <div class="editor-field" style="width: 450px;">
                            @Html.TextBoxFor(model => model.RandomFields, new { style = "width: 440px;", @readonly = "readonly" })
                            @Html.ValidationMessageFor(model => model.RandomFields)
                        </div>
                    </td>
                    <td colspan="2" style="color:gray; ">(@Html.Translate("Klikni i uredi"))</td>
                </tr>
                <tr>

                    <td>
                        <!-- QUICKGAME  -->
                        @*<div class="editor-label" style="text-align:right; ">
                                @Html.LabelFor(model => model.QuickGamePool, @Html.Translate("Igra na brzinu"), new { style = "width: 60px;" })
                            </div>*@

                    </td>
                    <td></td>
                    <td>
                        @*<div class="editor-field" style="width: 150px;">

                                @Html.TextBoxFor(model => model.QuickGamePool, new { style = "width: 140px;", type="number" })
                                @Html.ValidationMessageFor(model => model.QuickGamePool)
                            </div>*@

                    </td>
                    <!-- CATEGORY NAME - hidden-->
                    <td>
                        <div class="editor-label">

                        </div>
                    </td>
                    <td></td>
                    <td></td>
                </tr>
            <tr>
                <td class="label">
                  <b>  @Html.Translate("Contact No.") </b>
                </td>
                <!-- broj kontakta (količina) -->
                <td colspan="3">
                    <div class="editor-field" style="width: 60px;">
                        @Html.TextBoxFor(model => model.Quantity, new { style = "width: 60px;", type="number" })
                       @* @Html.ValidationMessageFor(model => model.Quantity)*@
                    </div>
                </td>
            </tr>

                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.StartField, @Html.Translate("Početno polje"))
                        </div>
                    </td>
                    <td></td>
                    <td>
                        <div class="editor-field" style="width: 200px;">
                            @* <input style = "width: 50px;" type="text" id="txtStartField" value = @Model.StartField>*@
                            @Html.TextBoxFor(model => model.StartField, new { style = "width: 140px;", type="number" })
                            @Html.ValidationMessageFor(model => model.StartField)
                        </div>
                    </td>
                    <td>
                        <div class="editor-label">
                            @Html.LabelFor(model => model.Countdown, @Html.Translate("Odbrojavanje"))
                        </div>
                    </td>
                    <td>
                        <div class="editor-field" style="width: 60px;">
                            @Html.TextBoxFor(model => model.Countdown, new { style = "width: 40px;", type="number" })
                            @Html.ValidationMessageFor(model => model.Countdown)
                        </div>
                    </td>
                    <td></td>
                </tr>
                <tr>
                    <td>
                        <div class="editor-label">
                            @Html.Translate("Max. put")
                        </div>
                    </td>
                    <td>
                        <div class="editor-field" style="width: 100px;">
                            @Html.TextBoxFor(model => model.Distance, new { style = "width: 80px;", type="number" })
                            @Html.ValidationMessageFor(model => model.Distance)
                        </div>
                    </td>
                    <td>[m]</td>
                </tr>
                    <tr>
                        <td colspan="3">
                            <font size="2" style="color: #0360a3; font-family: 'Open Sans', sans-serif; padding-right: 10px;">
                            <b>Erweiterte Einstellungen:</b>
                            </font>
                        </td>
                    </tr><tr><td colspan="5"><hr /></td></tr>
                    <tr>
                        <td style="text-align: left; width: 120px;">
                            <div class="editor-label" style="width: 120px;">
                            <b>@Html.Translate("Bodenkontaktzeit") </b>
                            </div>
                        </td>
                        <td>
                            <div class="editor-field" style="width: 50px;">
                                @Html.TextBoxFor(model => model.MinStayTime, new { type = "number" })
                                @*     @Html.ValidationMessageFor(model => model.MinStayTime)*@
                            </div>
                        </td>
                        <td>ms</td>
                        <td>
                            <div class="editor-field" style="width: 50px;">
                                @Html.TextBoxFor(model => model.MaxStayTime, new { type = "number" })
                                @*  @Html.ValidationMessageFor(model => model.MaxStayTime)*@
                            </div>
                        </td>
                        <td>ms</td>
                    </tr>

                    <tr>
                        <td>
                            <div class="editor-label">
                            <b>@Html.Translate("Fly time") </b>
                            </div>
                        </td>
                        <td>
                            <div class="editor-field" style="width: 50px;">
                                @Html.TextBoxFor(model => model.MinFlyTime, new { type = "number" })
                                @* @Html.ValidationMessageFor(model => model.MinFlyTime)*@
                            </div>
                        </td>
                        <td>ms</td>
                        <td>
                            <div class="editor-field" style="width: 50px;">
                                @Html.TextBoxFor(model => model.MaxFlyTime, new { type = "number" })
                                @*  @Html.ValidationMessageFor(model => model.MaxFlyTime)*@
                            </div>
                        </td>
                        <td>ms</td>
                    </tr>

            </table>

            <script type="text/javascript">

                $('#divsec').click(function () {
                    $("#TimeLimitSecMin").val(true);
                    $('#divsec').hide();
                    $('#divmin').show();
                });
                $('#divmin').click(function () {
                    $("#TimeLimitSecMin").val(false);
                    $('#divsec').show();
                    $('#divmin').hide();
                });

                $(document).ready(function () {
                    $("#MinStayTime").width(50);
                    $("#MaxStayTime").width(50);
                    $("#MinFlyTime").width(50);
                    $("#MaxFlyTime").width(50);
                    $("#DescriptionDuration").width(135);
                    $('#divsec').css('cursor', 'pointer');
                    $('#divmin').css('cursor', 'pointer');
                    $('#inlineNewXXX').fancybox({

                        'titlePosition': 'inside',
                        'transitionIn': 'fade',
                        'transitionOut': 'fade',
                        'autoDimensions': 'false',
                        'overlayOpacity': 0.5
                    });

                    //$('#inlineNewXXX').click(function () {
                    //    alert("sad");
                    //});

                    //function saveOn() {
                    //    alert("trebam submitati sad");
                    //    $("#myForm").submit();
                    //        //$.post("results/AjaxSearch?search=" + escape($("#txtSearch").val()), {}, function (ret) {
                    //        //    $("#content").html(ret);
                    //        //  }
                    //        //);
                    //}
                    $('#delete').click(function () {
                        //if (confirm("Are you sure?")) {
                        if (confirm("Sind Sie sicher?")) {
                            $.post('@Url.Action("Delete", "GameInOut", new { Model.ID })', function (data) {
                                window.location.href = '@Url.Action("Games","Configurator")';
                            });
                        }
                        return false;
                    });


                    $('#SaveAs').click(function () {


                        // alert("Jeste li sigurni da zelite to snimiti kao novu igricu!?");
                        $.post('@Url.Action("SaveAs2", "GameInOut")', {
                            Name: $('#txtGameName').val(), IsRandom: true, RandomValue: $('#RandomValue').val(),
                            RandomType: 1, IsTimeLimit: false, TimeLimit: $('#TimeLimit').val(),
                            Description: $('#Description').val(), Objectives: $('#Objectives').val(), Definition: $('#Definition').val(),
                            NumShownFields: $('#NumShownFields').val(), NumRepetition: $('#NumRepetition').val(), RandomFields: $('#RandomFields').val(),
                            QuickGamePool: true, CategoryID: $('#CategoryID').val(), MinStayTime: $('#MinStayTime').val(),
                            MaxStayTime: $('#MaxStayTime').val(), MinFlyTime: $('#MinFlyTime').val(), MaxFlyTime: $('#MaxFlyTime').val(),
                            StartField: $('#StartField').val(), Countdown: $('#Countdown').val(), LegLeft: true, LegRight: true, Quantity: $('#Quantity').val(), Distance: 0
                        },
                         function (data) {
                             $('#ID').val(data);
                             $('#inoutName').html($('#txtGameName').val());
                             $.fancybox.close();
                             debugger;
                             window.location.href = '@Url.Action("Games", "Configurator")';
                         });
                    });

                    //debugger;
                    // 'autoSize': true,
                    $('#RandomFields').click(function () {
                        $('#RandomFields').blur();

                        $.fancybox({
                            'type': 'iframe',
                            'width': 280,
                            'height': 280,
                            'transitionIn': 'none',
                            'transitionOut': 'none',
                            'href': '@Url.Action("RandomFields", "GameInOut", new { Model.ID })',
                            'onClosed': function () {
                                //debugger;
                                $.post('@Url.Action("RandomFieldsAll", "GameInOut", new { Model.ID })', function (data) {
                                    //debugger;
                                    $('#RandomFields').val(data);
                                    $('#RandomFields').html(data);

                                });
                                //window.location.href = window.location.href;
                            }
                        });
                    });
                });

                function functionRefreshaRandomFields() {
                    alert("osvijezi polja random fields!");
                }
                function fancyConfirm(dataObject) {
                    var makeSureText = ich['areYouSure'](dataObject);
                    $.fancybox({
                        modal: true,
                        content: makeSureText,
                        onComplete: function () {
                            $("#okConfirm").click(function (event, dataObject) {
                                event.preventDefault();
                                dataObject.confirmed();
                                $.fancybox.close();
                            })
                            $("#cancelConfirm").click(function (event) {
                                event.preventDefault();
                                $.fancybox.close();
                            })
                        },
                        onClosed: function () {
                            return false;
                        }
                    });
                    return false;
                }
            </script>
            @Html.HiddenFor(model => model.CategoryID, "Category")
            @Html.HiddenFor(model => model.ID)

            
                @*@Html.HiddenFor(model => model.Description)*@
                @Html.HiddenFor(model => model.NameHR)
                @Html.HiddenFor(model => model.NameENG)
                @Html.HiddenFor(model => model.IsRandom)
                @*@Html.HiddenFor(model => model.RandomValue)*@
                @Html.HiddenFor(model => model.IsTimeLimit)
                @*@Html.HiddenFor(model => model.RandomType)*@
                @*@Html.HiddenFor(model => model.NumRepetition)*@
                @Html.HiddenFor(model => model.Definition)
                @*@Html.HiddenFor(model => model.NumShownFields)*@
                @Html.HiddenFor(model => model.DescriptionHR)
                @*@Html.HiddenFor(model => model.Objectives)*@
                @Html.HiddenFor(model => model.QuickGamePool)
        
            


            <div align="right">
                <table style="width:580px; height:68px; text-align:right; margin-top:50px;">
                    <tr>
                        <!-- SAVE -->

                        <td>
                            <p>
                                <input type="submit" value="@Html.Translate("Spremi")" class="medvedButton" />
                            </p>
                        </td>

                        <td>
                            <p>
                                <div id="delete" class="medvedButton">

                                    @Html.Translate("Delete")
                                </div>
                            </p>
                        </td>
                        <!-- SAVE AS -->
                        <td>
                            <a id="inlineNewXXX" href="#newXXXVal" class="medvedButton">
                                @Html.Translate("Speichern unter")
                                <div style="display:none; width:600px;">
                                    <div id="newXXXVal">
                                        <table>
                                            <tr>
                                                <td>
                                                    <font style="color:gray;">Save </font>
                                                </td>
                                                <td>
                                                    <font style="color:gray;"> as: </font>
                                                </td>
                                                <td>
                                                    <input style="width:460px; color: #0360a3;" id="txtGameName" type="text" value="@ViewBag.game.Name"> </input>
                                                </td>
                                            </tr>
                                        </table>
                                        <table>
                                            <tr>
                                                <td>
                                                    <input type="button" onclick="javascript: $.fancybox.close();" value="@Html.Translate("Abbrechen")" class="medvedButton" />
                                                </td>
                                                <td>
                                                    <input id="SaveAs" type="button" value="@Html.Translate("Speichern")" class="medvedButton" />
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </a>
                        </td>

                    </tr>
                </table>
            </div>
            </div>
            </div>
        }


        @section Scripts {
            @Scripts.Render("~/bundles/jqueryval")
        }
    </div>





