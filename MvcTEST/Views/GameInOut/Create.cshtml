@model MvcTEST.Models.tblGame
@using MvcTEST.HtmlHelpers
@{
    ViewBag.Title = "InOut";
}

<style>
    #newXXXVal {
        z-index: 10000;
        position: relative;
        padding: 25px;
        width: 580px;
        height: 100px;
        text-align: left;
        overflow: hidden;
        margin: 0px;
        font: bold 11px Verdana, Sans-serif;
        color: #fff;
        font-size: 16px;
        color: black;
    }

</style>

<div id="l1" style="padding: 10px; width: inherit; height: inherit; position: relative; z-index: 1; -moz-box-shadow: 3px 3px 5px 6px #000; -webkit-box-shadow: 3px 3px 5px 6px #000; box-shadow: 0px 0px 20px 0px gray; border: 0px solid; border-radius: 10px; -moz-border-radius: 10px; background-color: #EFECE7;">
    <div align="left" style="border: 0px solid;">
        <div align="right">
            <a href="@Url.Action("Games", "Configurator")" >
                <img src="~/ImagesApp/close.png" border="0" />
            </a>
        </div>
        <title>@ViewBag.Title</title>

        <script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
        <script type="text/javascript" src="/Scripts/fancybox/jquery.fancybox-1.3.4.js"></script>
        <script type="text/javascript" src="/Scripts//fancybox/jquery.Easing-1.3.pack.js"></script>
        <link id="size-stylesheet" href="@Url.Content("/Content/style.css")" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="@Url.Content("~/Scripts/fancybox/jquery.fancybox-1.3.4.css")" type="text/css" media="screen" />

        @using (Html.BeginForm()) { 
            @Html.ValidationSummary(true)
       
            <table style="width:100%;table-layout:fixed">
                    <tr>
                    <td style="width:200px">
                        <table style="width: 500px; text-align: left">
                                <tr>
                                    <td>
                                        <img src="~/ImagesApp/inout1.png" />
                                    </td>
                                <td>
                                    <div id="errorsi" style="float: left; margin-right: 40px; color: red;"> </div>
                                </td>
                                </tr>
                            </table>
                        </td>
                        <td>
                        <div style="float:right;">
                            <table style="width:100%;">
                                <tr>
                                    <td colspan="2" style="padding-bottom:20px;text-align:right">
                                        <font size="6" style="color: #0360a3; font-family: 'Open Sans', sans-serif;">
                                            <b> @Html.Translate((string)ViewBag.game.ToUpper()) </b></td>
                                </tr>
                                <tr>
                                    <td style="width:200px;text-align:right">
                                        <div class="editor-label" style="width:200px">
                                            @Html.LabelFor(model => model.Name, @Html.Translate("Naziv igre"))
                                        </div>
                                    </td>
                                    <td>
                                        <div class="editor-field" style="width: 300px;">
                                            @Html.TextBoxFor(model => model.Name, new { @Value = ViewBag.game, style = "width: 280px;" })
                                        </div>
                                    </td>

                                </tr>
                            </table>
                        </div>
                    </td>
                    </tr>
                </table>
            <hr /> 

            <table class="edit">
                <tr>
                    <td class="label">
                            @Html.LabelFor(model => model.TimeLimit, @Html.Translate("Spieldauer"))
                    </td>
                    <td colspan="3">
                        <table><tr><td>
                        <div class="editor-field" style="width:80px;">
                            @Html.TextBoxFor(model => model.TimeLimit, new { @Value = 10, style = "width: 80px;" })
                        </div>
                    </td>
                        <td style="padding-left:5px">
                            (Sec)                    
                        </td></tr></table>
                    </td>
                </tr>
                <tr>
                    <td class="label">
                        @Html.LabelFor(model => model.Description, @Html.Translate("Description"))                    
                    </td>
                    <td colspan="3">
                        <div class="editor-field" style="width:670px">
                            @Html.TextBoxFor(model => model.Description, new { style = "width: 670px;" })                       
                        </div>
                    </td>
                </tr>
                <!-- RANDOM FIELDS -->
                <tr>
                    <td class="label">
                            @Html.Translate("Automatski generirajuća polja")
                    </td>
                    <td colspan="3">
                        <table>
                            <tr>
                                <td>
                        <div class="editor-field" style="width: 450px;">
                                        @Html.TextBoxFor(model => model.RandomFields, new { style = "width: 450px;" })
                            @Html.ValidationMessageFor(model => model.RandomFields)
                        </div>
                    </td>
                                <td style="color: gray; padding-left:5px">(@Html.Translate("Klikni i uredi"))</td>
                </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="label">
                        <!-- QUICKGAME  -->
                            @Html.LabelFor(model => model.QuickGamePool, @Html.Translate("Igra na brzinu"), new { style = "width: 60px;" })
                    </td>
                    <td colspan="3">
                        <div class="editor-field" style="width:250px;">
                            @Html.EditorFor(model => model.QuickGamePool)
                            @Html.ValidationMessageFor(model => model.QuickGamePool)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="label">
                        @Html.Translate("Vrijeme kontakta")
                    </td>
                    <td colspan="3">
                        <table>
                            <tr>
                                <td style="padding-left:10px">
                            @Html.LabelFor(model => model.MinStayTime, "(min.)")
                    </td>
                    <td>
                                    <div class="editor-field" style="width:100px;">
                                       @Html.TextBoxFor(model => model.MinStayTime, new { style = "width:100px;" })
                        </div>
                    </td>
                                <td style="padding-left:5px">
                                    [ms]
                                </td>
                                <td style="padding-left:55px">
                            @Html.LabelFor(model => model.MaxStayTime, "(max.)")
                    </td>
                    <td>
                                    <div class="editor-field" style="width:100px;">
                                       @Html.TextBoxFor(model => model.MaxStayTime, new { style = "width:100px;" })
                        </div>
                    </td>
                                <td style="padding-left:5px">
                                    [ms]
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="label">
                        @Html.Translate("Vrijeme u zraku")
                    </td>
                    <td colspan="3">
                        <table>
                            <tr>
                                <td style="padding-left:10px">
                            @Html.LabelFor(model => model.MinFlyTime, "(min.)")
                    </td>
                    <td>
                                    <div class="editor-field" style="width:100px;">
                                       @Html.TextBoxFor(model => model.MinFlyTime, new { style = "width:100px;" })
                        </div>
                    </td>
                                <td style="padding-left:5px">
                                    [ms]
                                </td>
                                <td style="padding-left:55px">
                            @Html.LabelFor(model => model.MaxFlyTime, "(max.)")
                    </td>
                    <td>
                                    <div class="editor-field" style="width:100px;">
                                       @Html.TextBoxFor(model => model.MaxFlyTime, new { style = "width:100px;" })
                        </div>
                    </td>
                                <td style="padding-left:5px">
                                    [ms]
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <td class="label">
                            @Html.LabelFor(model => model.StartField, @Html.Translate("Početno polje"))
                    </td>
                    <td style="width:300px">
                        <div class="editor-field">
                            @* <input style = "width: 50px;" type="text" id="txtStartField" value = @Model.StartField>*@
                            @Html.EditorFor(model => model.StartField, new { style = "width: 140px;" })
                            @Html.ValidationMessageFor(model => model.StartField)
                        </div>
                    </td>
                    <td class="label" style="width:90px">
                            @Html.LabelFor(model => model.Countdown, @Html.Translate("Odbrojavanje"))
                    </td>
                    <td>
                        <div class="editor-field" style="width: 60px;">
                            @Html.TextBoxFor(model => model.Countdown, new { @Value=3, style = "width: 40px;" })
                            @Html.ValidationMessageFor(model => model.Countdown)
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="label">
                            @Html.Translate("Max. putanja")
                    </td>
                    <td colspan="3">
                        <table>
                            <tr>
                    <td>
                        <div class="editor-field" style="width: 100px;">
                            @Html.TextBoxFor(model => model.Quantity, new { style = "width: 80px;" })
                            @Html.ValidationMessageFor(model => model.Quantity)
                        </div>
                    </td>
                                <td style="padding-left: 5px">[m]
                                </td>
                            </tr>
                        </table>
                    </td>                    
                </tr>
            </table>
            <p>
                <input id="Save" type="submit" class="gray-button" style="float:right" value="@Html.Translate("Stvori igru").ToUpper()"/>
            </p>
            <div style="clear:both"></div>
}
                
<script type="text/javascript">
    var x;
    $(document).ready(function () {

        $('#inlineNewXXX').fancybox({

            'titlePosition': 'inside',
            'transitionIn': 'fade',
            'transitionOut': 'fade',
            'autoDimensions': 'false',
            'overlayOpacity': 0.5
        });

        //$('#inlineNewXXX').click(function () {
        //    alert("sad");
        //});

        //function saveOn() {
        //    alert("trebam submitati sad");
        //    $("#myForm").submit();
        //        //$.post("results/AjaxSearch?search=" + escape($("#txtSearch").val()), {}, function (ret) {
        //        //    $("#content").html(ret);
        //        //  }
        //        //);
        //}  



        //debugger;
        // 'autoSize': true,
        $('#RandomFields').click(function () {
debugger;
            $('#RandomFields').blur();
            

            $.fancybox({
                'type': 'iframe',
                'width': @ViewBag.teren.Width, //360,
                'height': @ViewBag.teren.Height,
                'transitionIn': 'none',
                'transitionOut': 'none',
                'href': '@Url.Action("teren", "GameInOut")',
 //                           'onClosed': function () {
 //                               //debugger;
 //                               $.post('@Url.Action("RandomFieldsAll", "GameInOut", new { ID = 0})', function (data) {
 //                                   //debugger;
 //                                   $('#RandomFields').val(data);
 //                                   $('#RandomFields').html(data);

 //                               });
                                //window.location.href = window.location.href;                                
                "onCleanup": function(){
                    x = $('#fancybox-frame').contents().find('#log').attr('name');
                },
                "onClosed": function(){
                    //alert("the value of input #F01 is : "+x); // optional
                    $('#RandomFields').val(x);
                }                
            

                        });
                    });
    });

                function functionRefreshaRandomFields() {
                    alert("osvijezi polja random fields!");
                }
                function fancyConfirm(dataObject) {
                    var makeSureText = ich['areYouSure'](dataObject);
                    $.fancybox({
                        modal: true,
                        content: makeSureText,
                        onComplete: function () {
                            $("#okConfirm").click(function (event, dataObject) {
                                event.preventDefault();
                                dataObject.confirmed();
                                $.fancybox.close();
                            })
                            $("#cancelConfirm").click(function (event) {
                                event.preventDefault();
                                $.fancybox.close();
                            })
                        },
                        onClosed: function () {
                            return false;
                        }
                    });
                    return false;
                }
</script>
            @Html.HiddenFor(model => model.CategoryID)
        @section Scripts {
            @Scripts.Render("~/bundles/jqueryval")
        }
    </div>
</div>
